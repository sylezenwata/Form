!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("form",[],e):"object"==typeof exports?exports.form=e():t.form=e()}(self,(function(){return function(){"use strict";var t={};function e(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a=[],i=!0,s=!1;try{for(r=r.call(t);!(i=(n=r.next()).done)&&(a.push(n.value),!e||a.length!==e);i=!0);}catch(t){s=!0,o=t}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}}(t,e)||n(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||n(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){if(t){if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var s=function(){function t(e){var n=this;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!window.set&&!globalThis.set)throw new Error("form.js depends on set.js (https://github.com/sylezenwata/set.git), and must be defined in window or global scope");this.set=window.set||globalThis.set,this.formSelector="form[data-jsvalidate]",this.fieldsRequiredSelector="[jsrequired]",this.fieldsSwitchSelector="[jstypeswitch]",this.swithBtnSelector="[data-switch-btn]",this.resetDataFieldsType=["input:not([type='hidden']):not([type='submit']):not([type='button'])","select","textarea"],this.errorTag={partA:'<div class="form-input-error" data-form-input-error><svg class="form-input-error-icon" focusable="false" width="16px" height="16px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"></path></svg><span>',partB:"</span></div>"},this.regex={email:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,phone:/^([0])([7]|[8]|[9])([\d]){9}$/,password:/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{6,20}$/,default:/(.+)/},e&&"object"===a(e)&&Object.keys(e).forEach((function(t){n.hasOwnProperty(t)&&(Array.isArray(n[t])?n[t]=r(new Set(n[t].concat(e[t]))):"object"===a(n[t])?Object.assign(n[t],e[t]):n[t]=e[t])})),this.validatedForms={}}var n,o;return n=t,(o=[{key:"init",value:function(){return this.observeFields(),this.observeFieldsToSwitch(),this.observeFormSubmit(),this}},{key:"validateFields",value:function(t){var e=this;Array.isArray(t)||t instanceof NodeList||(t=[t]);var r=[];return t.forEach((function(t){var n=e.set(t).attr("jsname")[0],o=/^(span|div)$/.test(t.nodeName.toLowerCase())?t.innerText:t.value,a=e.set(t).parent("[data-error]");(e.regex[n]?e.regex[n]:e.regex.default).test(o.trim())?(a.data("error","false"),a.remove("[data-form-input-error]")):(a.data("error","true"),a.find("[data-form-input-error]")[0]||a.append(e.createFormInputError("Invalid ".concat(e.set(t).attr("jsvalidate")[0].split("+").join(" or ")))),r.push(n)),e.setHasContent(o,a)})),0===r.length}},{key:"createFormInputError",value:function(t){return"".concat(this.errorTag.partA).concat(t).concat(this.errorTag.partB)}},{key:"setHasContent",value:function(t,e){""!==t.trim()?e.data("content","true"):e.data("content","false")}},{key:"observeFields",value:function(){var t=this;this.set(document).on("blur","".concat(this.formSelector," ").concat(this.fieldsRequiredSelector),(function(e){return t.validateFields(e.target)}),!0)}},{key:"observeFieldsToSwitch",value:function(){var t=this;this.set(document).on("click","".concat(this.swithBtnSelector),(function(e){var r=t.set(e.target).sibling(t.fieldsSwitchSelector),n=r.attr("type")[0];r[0].type=r.attr(t.fieldsSwitchSelector)[0],r.attr(t.fieldsSwitchSelector,n)}),!0)}},{key:"observeFormSubmit",value:function(){var t=this;this.set(document).on("submit","".concat(this.formSelector),(function(e){var r=e.target,n=r.id;n||(n=t.genDynamicId(r),r.id=n),t.validateFields(t.set(r).find(t.fieldsRequiredSelector)[0])?t.validatedForms[n]=!0:(e.preventDefault(),t.validatedForms[n]=!1)}),!0)}},{key:"genDynamicId",value:function(t){return this.set(this.formSelector).map((function(e,r){if(e===t)return"".concat(r)}))[0]+Math.floor(1e9*Math.random())}},{key:"reset",value:function(t,e){var r=this;e=e?e.join():this.resetDataFieldsType.join(),this.set(t).find(e)[0].forEach((function(t){/^(span|div)$/.test(t.nodeName.toLowerCase())?t.innerText="":t.value="",r.set(t).parent("[data-content]").data("content","false")}))}},{key:"formData",value:function(t,n,o){var a=["url","formdata","json"];if("string"==typeof n&&!a.some((function(t){return t.toLowerCase()===(null==n?void 0:n.toLowerCase())})))throw new Error("Valid formats are ".concat(a.join(" or ")));var i=new FormData(this.set(t)[0]);return o&&r(i.keys).some((function(t){return o.includes(t)}))&&o.forEach((function(t){r(i.keys).some((function(e){return e===t}))&&i.delete(t)})),"url"===(null==n?void 0:n.toLowerCase())?r(i.entries()).map((function(t){var r=e(t,2),n=r[0],o=r[1];return"".concat(n,"=").concat(o)})).join():"json"===(null==n?void 0:n.toLowerCase())?r(i.entries()).reduce((function(t,r){var n=e(r,2),o=n[0],a=n[1];return t[o]=a,t}),{}):i}}])&&i(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),t}();return t.default=s,t.default}()}));