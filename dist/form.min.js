!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.form=t():e.form=t()}(self,(function(){return function(){"use strict";var e={d:function(t,r){for(var s in r)e.o(r,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:r[s]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{form:function(){return r}});class r{constructor(e){if(!window.set)throw new Error("form.js depends on set.js (https://github.com/sylezenwata/set.js)");"function"!=typeof set&&set.hasOwnProperty("__esModule")&&(set=set.set),this.formSelector="form[data-jsvalidate]",this.fieldsRequiredSelector="[jsrequired]",this.fieldsWithPlaceholder="[jsplaceholder]",this.fieldsSwitchSelector="[jstypeswitch]",this.swithBtnSelector="[data-switch-btn]",this.dataFieldsType=["input:not([type='submit']):not([type='button'])","select","textarea"],this.regex={email:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,phone:/^([0])([7]|[8]|[9])([\d]){9}$/,password:/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{6,20}$/,default:/(.+)/},e&&"object"==typeof e&&Object.keys(e).forEach((t=>{this.hasOwnProperty(t)&&(Array.isArray(this[t])?this[t]=[...new Set(this[t].concat(e[t]))]:"object"==typeof this[t]?Object.assign(this[t],e[t]):this[t]=e[t])})),this.validatedForms={}}init(){return this.observeFields(),this.observeFieldsToSwitch(),this.observeFormSubmit(),this}validateFields(e){Array.isArray(e)||e instanceof NodeList||(e=[e]);let t=[];return e.forEach((e=>{const r=set(e).attr("jsname")[0],s=/^(span|div)$/.test(e.nodeName.toLowerCase())?e.innerText:e.value,o=set(e).parent("[data-content]");(this.regex[r]?this.regex[r]:this.regex.default).test(s.trim())?(o.data("error","false"),o.remove("[data-form-input-error]")):(o.data("error","true"),o.find("[data-form-input-error]")[0]||o.append(this.createFormInputError(`Invalid ${set(e).attr("jsvalidate")[0].split("+").join(" or ")}`)),t.push(r)),this.setHasContent(e,s,o)})),0===t.length}createFormInputError(e){return`<div class="form-input-error" data-form-input-error><svg class="form-input-error-icon" focusable="false" width="16px" height="16px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"></path></svg><span>${e}</span></div>`}setHasContent(e,t,r){set(e).attr(this.fieldsWithPlaceholder.replace(/[\[\]]/g,""))[0]&&(""!==t.trim()?r.data("content","true"):r.data("content","false"))}observeFields(){set(document).on("blur",`${this.formSelector} ${this.fieldsRequiredSelector}`,(e=>this.validateFields(e.target)),!0)}observeFieldsToSwitch(){set(document).on("click",`${this.swithBtnSelector}`,(e=>{const t=set(e.target).sibling(this.fieldsSwitchSelector),r=t.attr("type")[0];t[0].type=t.attr(this.fieldsSwitchSelector)[0],t.attr(this.fieldsSwitchSelector,r)}),!0)}observeFormSubmit(){set(document).on("submit",`${this.formSelector}`,(e=>{const t=e.target;let r=t.id;r||(r=this.genDynamicId(t),t.id=r),this.validateFields(set(t).find(this.fieldsRequiredSelector)[0])?this.validatedForms[r]=!0:(e.preventDefault(),this.validatedForms[r]=!1)}),!0)}genDynamicId(e){return set(this.formSelector).map(((t,r)=>{if(t===e)return`${r}`}))[0]+Math.floor(1e9*Math.random())}reset(e,t){t=t?t.join():this.dataFieldsType.join(),set(e).find(t)[0].forEach((e=>{/^(span|div)$/.test(e.nodeName.toLowerCase())?e.innerText="":e.value="",set(e).parent("[data-content]").data("content","false")}))}formData(e,t,r){const s=["url","formdata","json"];if("string"==typeof t&&!s.some((e=>e.toLowerCase()===t?.toLowerCase())))throw new Error(`Valid formats are ${s.join(" or ")}`);let o=new FormData(set(e)[0]);return r&&[...o.keys].some((e=>r.includes(e)))&&r.forEach((e=>{[...o.keys].some((t=>t===e))&&o.delete(e)})),"url"===t?.toLowerCase()?[...o.entries()].map((e=>{let[t,r]=e;return`${t}=${r}`})).join():"json"===t?.toLowerCase()?[...o.entries()].reduce(((e,t)=>{let[r,s]=t;return e[r]=s,e}),{}):o}}return t}()}));