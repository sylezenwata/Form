!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.form=t():e.form=t()}(self,(function(){return function(){"use strict";var e={d:function(t,r){for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{form:function(){return o}});class r extends Array{ready(e){return this.some((e=>null!=e.readyState&&"loading"!=e.readyState))?e():this.on("DOMContentLoaded",e),this}on(e,t,r,n){return"function"==typeof t?this.forEach((r=>r.addEventListener(e,t,n))):this.forEach((o=>{o.addEventListener(e,(e=>{e.target.matches(t)&&r(e)}),n)})),this}off(e,t,r){return"function"==typeof t&&this.forEach((n=>n.removeEventListener(e,t,r))),this}next(){return this.map((e=>e.nextElementSibling)).filter((e=>null!=e))}prev(){return this.map((e=>e.previousElementSibling)).filter((e=>null!=e))}parent(e){return e?this.map((t=>{if(document.querySelector(e)&&document.querySelector(e).querySelector(t.nodeName)){let r=t.parentElement;for(;!r.matches(e);)r=r.parentElement;return r}return null})).filter((e=>null!=e)):this.map((e=>e.parentElement)).filter((e=>null!=e))}sibling(e){return this.map((t=>[...t.parentElement.querySelector(e)])).filter((e=>e.length>0))}find(e){return this.map((t=>[...t.querySelectorAll(e)])).filter((e=>e.length>0))}toggleClass(e,t){return this.forEach((r=>r.classList.toggle(e,t))),this}removeClass(...e){return this.forEach((t=>t.classList.remove(...e))),this}addClass(...e){return this.forEach((t=>t.classList.add(...e))),this}css(e,t){const r=e.replace(/(-[a-z])/,(e=>e.replace("-","").toUpperCase()));return this.forEach((e=>e.style[r]=t)),this}attr(e,t=null){return t||"string"==typeof t?(!1===t?this.forEach((t=>t.removeAttribute(e))):this.forEach((r=>r.setAttribute(e,t))),this):this.map((t=>t.getAttribute(e))).filter((e=>null!=e))}data(e,t){try{const{groups:{dataname:t}}=/^(data)?(-)?(?<dataname>.+)$/.exec(e);e=t.split("-").map(((e,t)=>t>0?e.slice(0,1).toUpperCase()+e.slice(1):e)).join("")}catch(e){return"typeerror"===e.name.toLowerCase()&&console.error("you did not pass a valid data name"),console.error(e),this}return t||"string"==typeof t?(this.forEach((r=>r.dataset[e]=t)),this):this.map((t=>t.dataset[e])).filter((e=>null!=e))}html(e){return e||"string"==typeof e?(this.forEach((t=>t.innerHTML=e)),this):this.map((e=>e.innerHTML)).filter((e=>null!=e))}text(e){return e||"string"==typeof e?(this.forEach((t=>t.textContent=e)),this):this.map((e=>e.textContent)).filter((e=>null!=e))}elemManip(e){let t=e.match(/<[^>]*>/g)[0].replace(/</,"").replace(/>/,""),r=t.split(" ")[0];t=t.match(/(\s+[a-zA-Z0-9-]+="[a-zA-Z0-9-_:\(\)\/\s;]+")|(\s+[a-zA-Z0-9-]+)/g),t&&(t=t.map((e=>e.trim()))),e=e.replace(/<[^>]*>/,"").replace(/<\/[^>]*>$/,"");let n=document.createElement(r);return t&&t.forEach((e=>{let[t,r=""]=e.replace(/\"/g,"").split("=");n.setAttribute(t,r)})),n.innerHTML=e,n}append(e){return this.forEach((t=>t.insertAdjacentElement("beforeend",this.elemManip.call(this,e)))),this}prepend(e){return this.forEach((t=>t.insertAdjacentElement("afterbegin",this.elemManip.call(this,e)))),this}disableForm(e=!1){return this.forEach((t=>{t.elements&&t.elements.length>0&&[...t.elements].forEach((t=>{t.disabled=!e}))})),this}remove(e){return this.forEach((t=>{t.querySelectorAll(e).forEach((e=>e&&e.remove()))})),this}}function n(e){return"string"==typeof e||e instanceof String?new r(...document.querySelectorAll(e)):new r(e)}n.checkDeviceWidth=function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth},n.deviceType=function(){const e=navigator.userAgent||navigator.vendor;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e)?"tablet":/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(e)?"mobile":"desktop"},n.browserType=function(){return-1!==(navigator.userAgent.indexOf("Opera")||navigator.userAgent.indexOf("OPR"))?"Opera":-1!==navigator.userAgent.indexOf("Chrome")?"Chrome":-1!==navigator.userAgent.indexOf("Safari")?"Safari":-1!==navigator.userAgent.indexOf("Firefox")?"Firefox":-1!==navigator.userAgent.indexOf("MSIE")||1==!!document.documentMode?"IE":"unknown"},n.setCookie=function(e,t,r=30,n="/"){const o=new Date;o.setTime(o.getTime()+24*(r||0)*60*60*1e3);const i=escape(t)+"; expires="+o.toUTCString();document.cookie=e+"="+i+"; path="+n},n.getCookie=function(e){let t,r,n,o;t=decodeURIComponent(document.cookie),r=t.split(";");for(let t=0;t<r.length;t++)if(n=r[t].substr(0,r[t].indexOf("=")),o=r[t].substr(r[t].indexOf("=")+1),n=n.replace(/^\s+|\s+$/g,""),n===e)return unescape(o)},n.updateCookie=function(e,t){this.gCookie(e)&&(document.cookie=e+"="+t)},n.ajax=function({url:e,method:t,timeOut:r,cache:n=!0,body:o=null,headers:i=null,responseType:s=null,withCredentials:a=!0}){return new Promise((function(l,c){const d=new XMLHttpRequest;a&&(d.withCredentials=!0),d.open(t,n?e:e+(/\?/.test(e)?"&":"?")+"_"+Math.floor(1e12*Math.random())),i=Object.assign({"X-Requested-With":"XMLHttpRequest",Accept:"application/json; charset=UTF-8"},i);let h=Object.keys(i);for(let e of h)i[e]&&d.setRequestHeader(e,i[e]);s&&(d.responseType=s),r&&(d.timeout=1e3*r),d.onload=function(){let{status:e,statusText:t,response:r}=d;e>=200&&e<300?l(r):c({code:e,message:t})},d.onerror=function(){let{status:e,statusText:t}=d;c({code:e,message:t})},d.send(o?/application\/json/.test(i["Content-Type"])?JSON.stringify(o):o:null)}))};class o{constructor(e){if(!window.set&&!n)throw new Error("form.js depends on set.js (https://github.com/sylezenwata/set.git)");"function"!=typeof n&&n.hasOwnProperty("__esModule")&&(n=n.set),this.formSelector="form[data-jsvalidate]",this.fieldsRequiredSelector="[jsrequired]",this.fieldsWithPlaceholder="[jsplaceholder]",this.fieldsSwitchSelector="[jstypeswitch]",this.swithBtnSelector="[data-switch-btn]",this.resetDataFieldsType=["input:not([type='hidden']):not([type='submit']):not([type='button'])","select","textarea"],this.errorTag={partA:'<div class="form-input-error" data-form-input-error><svg class="form-input-error-icon" focusable="false" width="16px" height="16px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"></path></svg><span>',partB:"</span></div>"},this.regex={email:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,phone:/^([0])([7]|[8]|[9])([\d]){9}$/,password:/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{6,20}$/,default:/(.+)/},e&&"object"==typeof e&&Object.keys(e).forEach((t=>{this.hasOwnProperty(t)&&(Array.isArray(this[t])?this[t]=[...new Set(this[t].concat(e[t]))]:"object"==typeof this[t]?Object.assign(this[t],e[t]):this[t]=e[t])})),this.validatedForms={}}init(){return this.observeFields(),this.observeFieldsToSwitch(),this.observeFormSubmit(),this}validateFields(e){Array.isArray(e)||e instanceof NodeList||(e=[e]);let t=[];return e.forEach((e=>{const r=n(e).attr("jsname")[0],o=/^(span|div)$/.test(e.nodeName.toLowerCase())?e.innerText:e.value,i=n(e).parent("[data-content]");(this.regex[r]?this.regex[r]:this.regex.default).test(o.trim())?(i.data("error","false"),i.remove("[data-form-input-error]")):(i.data("error","true"),i.find("[data-form-input-error]")[0]||i.append(this.createFormInputError(`Invalid ${n(e).attr("jsvalidate")[0].split("+").join(" or ")}`)),t.push(r)),this.setHasContent(e,o,i)})),0===t.length}createFormInputError(e){return`${this.errorTag.partA}${e}${this.errorTag.partA}`}setHasContent(e,t,r){n(e).attr(this.fieldsWithPlaceholder.replace(/[\[\]]/g,""))[0]&&(""!==t.trim()?r.data("content","true"):r.data("content","false"))}observeFields(){n(document).on("blur",`${this.formSelector} ${this.fieldsRequiredSelector}`,(e=>this.validateFields(e.target)),!0)}observeFieldsToSwitch(){n(document).on("click",`${this.swithBtnSelector}`,(e=>{const t=n(e.target).sibling(this.fieldsSwitchSelector),r=t.attr("type")[0];t[0].type=t.attr(this.fieldsSwitchSelector)[0],t.attr(this.fieldsSwitchSelector,r)}),!0)}observeFormSubmit(){n(document).on("submit",`${this.formSelector}`,(e=>{const t=e.target;let r=t.id;r||(r=this.genDynamicId(t),t.id=r),this.validateFields(n(t).find(this.fieldsRequiredSelector)[0])?this.validatedForms[r]=!0:(e.preventDefault(),this.validatedForms[r]=!1)}),!0)}genDynamicId(e){return n(this.formSelector).map(((t,r)=>{if(t===e)return`${r}`}))[0]+Math.floor(1e9*Math.random())}reset(e,t){t=t?t.join():this.resetDataFieldsType.join(),n(e).find(t)[0].forEach((e=>{/^(span|div)$/.test(e.nodeName.toLowerCase())?e.innerText="":e.value="",n(e).parent("[data-content]").data("content","false")}))}formData(e,t,r){const o=["url","formdata","json"];if("string"==typeof t&&!o.some((e=>e.toLowerCase()===t?.toLowerCase())))throw new Error(`Valid formats are ${o.join(" or ")}`);let i=new FormData(n(e)[0]);return r&&[...i.keys].some((e=>r.includes(e)))&&r.forEach((e=>{[...i.keys].some((t=>t===e))&&i.delete(e)})),"url"===t?.toLowerCase()?[...i.entries()].map((e=>{let[t,r]=e;return`${t}=${r}`})).join():"json"===t?.toLowerCase()?[...i.entries()].reduce(((e,t)=>{let[r,n]=t;return e[r]=n,e}),{}):i}}return t}()}));